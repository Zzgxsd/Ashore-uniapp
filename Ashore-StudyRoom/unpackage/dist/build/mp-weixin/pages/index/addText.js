(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/addText"],{"0fb3":function(t,e,n){"use strict";var i=n("5835"),a=n.n(i);a.a},"233e":function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("d0ed"),n("a9ff");i(n("66fd"));var a=i(n("f5de"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},5835:function(t,e,n){},"690a":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"e216"))}},a=function(){var t=this.$createElement,e=(this._self._c,this.artObj.title.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},r=[]},afb2:function(t,e,n){"use strict";n.r(e);var i=n("ef63"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},ef63:function(t,e,n){"use strict";(function(t,i,a){var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("2eee")),c=r(n("c973")),u=n("4dab");function s(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw r}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var f={data:function(){return{toolShow:!1,headShow:!1,boldShow:!1,italicShow:!1,namekey:t.getStorageSync("namekey")||纯路人,artObj:{title:"",content:"",description:"",picurls:"",TXimg:"",Nickname:"",user_id:t.getStorageSync("namekey")}}},methods:{onSubmit:function(){var t=this;this.editorCtx.getContents({success:function(e){t.artObj.description=e.text.slice(0,80),t.artObj.content=e.html,t.artObj.picurls=(0,u.getImgSrc)(e.html),i.showLoading({title:"发布中"}),t.addData()}})},getData:function(){var t=this,e=this.namekey;a.callFunction({name:"getUserRow",data:{namekey:e}}).then((function(e){console.log(e.result.data[0]);var n=e.result.data[0];""!=n.Nickname?(t.artObj.TXimg=n.Nickname.slice(0,1),t.artObj.Nickname=n.Nickname,console.log("Nickname",t.artObj.TXimg)):(t.artObj.TXimg=n.user_name.slice(0,3),t.artObj.Nickname=n.user_name,console.log("UserId",t.artObj.TXimg))}))},addData:function(){var e=this.artObj;a.callFunction({name:"addArticle",data:{artObj:e}}).then((function(e){i.hideLoading(),i.showToast({title:"发布成功"}),setTimeout((function(){t.redirectTo({url:"/pages/index/StoreInquiry"})}),800)}))},clickInsertImage:function(){var t=this;i.chooseImage({success:function(){var e=(0,c.default)(o.default.mark((function e(n){var r,c,u,l;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.showLoading({title:"上传中",mask:!0}),r=s(n.tempFiles),e.prev=2,r.s();case 4:if((c=r.n()).done){e.next=12;break}return u=c.value,e.next=8,a.uploadFile({filePath:u.path,cloudPath:toString(u.name)});case 8:l=e.sent,t.editorCtx.insertImage({src:l.fileID});case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:i.hideLoading();case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()})},editOk:function(){this.toolShow=!1},clickItalic:function(){this.italicShow=!this.italicShow,this.editorCtx.format("italic")},clickBold:function(){this.boldShow=!this.boldShow,this.editorCtx.format("bold")},clickHead:function(){this.headShow=!this.headShow,this.editorCtx.format("header",!!this.headShow&&"h2")},clickDivider:function(){this.editorCtx.insertDivider()},onEditReady:function(){var t=this;i.createSelectorQuery().in(this).select(".myEdit").fields({size:!0,context:!0},(function(e){t.editorCtx=e.context})).exec()},checkStatus:function(t,e,n){e.hasOwnProperty(t)?this[n]=!0:this[n]=!1},onStatuschange:function(t){var e=t.detail;this.checkStatus("header",e,"headShow"),this.checkStatus("bold",e,"boldShow"),this.checkStatus("italic",e,"italicShow")},onFocus:function(){this.toolShow=!0},onLoad:function(){this.getData()}}};e.default=f}).call(this,n("bc2e")["default"],n("543d")["default"],n("a9ff")["default"])},f5de:function(t,e,n){"use strict";n.r(e);var i=n("690a"),a=n("afb2");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("0fb3");var o=n("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"1def58eb",null,!1,i["a"],void 0);e["default"]=c.exports}},[["233e","common/runtime","common/vendor"]]]);